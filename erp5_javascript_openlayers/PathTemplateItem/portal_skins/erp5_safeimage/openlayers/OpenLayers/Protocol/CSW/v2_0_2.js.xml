<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <global name="File" module="OFS.Image"/>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_EtagSupport__etag</string> </key>
            <value> <string>ts53684100.83</string> </value>
        </item>
        <item>
            <key> <string>__name__</string> </key>
            <value> <string>v2_0_2.js</string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>application/javascript</string> </value>
        </item>
        <item>
            <key> <string>data</string> </key>
            <value> <string encoding="cdata"><![CDATA[

/* Copyright (c) 2006-2012 by OpenLayers Contributors (see authors.txt for \n
 * full list of contributors). Published under the 2-clause BSD license.\n
 * See license.txt in the OpenLayers distribution or repository for the\n
 * full text of the license. */\n
\n
/**\n
 * @requires OpenLayers/Protocol/CSW.js\n
 * @requires OpenLayers/Format/CSWGetRecords/v2_0_2.js\n
 */\n
\n
/**\n
 * Class: OpenLayers.Protocol.CSW.v2_0_2\n
 * CS-W (Catalogue services for the Web) version 2.0.2 protocol.\n
 *\n
 * Inherits from:\n
 *  - <OpenLayers.Protocol>\n
 */\n
OpenLayers.Protocol.CSW.v2_0_2 = OpenLayers.Class(OpenLayers.Protocol, {\n
\n
    /**\n
     * Property: formatOptions\n
     * {Object} Optional options for the format.  If a format is not provided,\n
     *     this property can be used to extend the default format options.\n
     */\n
    formatOptions: null,\n
\n
    /**\n
     * Constructor: OpenLayers.Protocol.CSW.v2_0_2\n
     * A class for CSW version 2.0.2 protocol management.\n
     *\n
     * Parameters:\n
     * options - {Object} Optional object whose properties will be set on the\n
     *     instance.\n
     */\n
    initialize: function(options) {\n
        OpenLayers.Protocol.prototype.initialize.apply(this, [options]);\n
        if(!options.format) {\n
            this.format = new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({\n
            }, this.formatOptions));\n
        }\n
    },\n
\n
    /**\n
     * APIMethod: destroy\n
     * Clean up the protocol.\n
     */\n
    destroy: function() {\n
        if(this.options && !this.options.format) {\n
            this.format.destroy();\n
        }\n
        this.format = null;\n
        OpenLayers.Protocol.prototype.destroy.apply(this);\n
    },\n
\n
    /**\n
     * Method: read\n
     * Construct a request for reading new records from the Catalogue.\n
     */\n
    read: function(options) {\n
        options = OpenLayers.Util.extend({}, options);\n
        OpenLayers.Util.applyDefaults(options, this.options || {});\n
        var response = new OpenLayers.Protocol.Response({requestType: "read"});\n
\n
        var data = this.format.write(options.params);\n
\n
        response.priv = OpenLayers.Request.POST({\n
            url: options.url,\n
            callback: this.createCallback(this.handleRead, response, options),\n
            params: options.params,\n
            headers: options.headers,\n
            data: data\n
        });\n
\n
        return response;\n
    },\n
\n
    /**\n
     * Method: handleRead\n
     * Deal with response from the read request.\n
     *\n
     * Parameters:\n
     * response - {<OpenLayers.Protocol.Response>} The response object to pass\n
     *     to the user callback.\n
     *     This response is given a code property, and optionally a data property.\n
     *     The latter represents the CSW records as returned by the call to\n
     *     the CSW format read method.\n
     * options - {Object} The user options passed to the read call.\n
     */\n
    handleRead: function(response, options) {\n
        if(options.callback) {\n
            var request = response.priv;\n
            if(request.status >= 200 && request.status < 300) {\n
                // success\n
                response.data = this.parseData(request);\n
                response.code = OpenLayers.Protocol.Response.SUCCESS;\n
            } else {\n
                // failure\n
                response.code = OpenLayers.Protocol.Response.FAILURE;\n
            }\n
            options.callback.call(options.scope, response);\n
        }\n
    },\n
\n
    /**\n
     * Method: parseData\n
     * Read HTTP response body and return records\n
     *\n
     * Parameters:\n
     * request - {XMLHttpRequest} The request object\n
     *\n
     * Returns:\n
     * {Object} The CSW records as returned by the call to the format read method.\n
     */\n
    parseData: function(request) {\n
        var doc = request.responseXML;\n
        if(!doc || !doc.documentElement) {\n
            doc = request.responseText;\n
        }\n
        if(!doc || doc.length <= 0) {\n
            return null;\n
        }\n
        return this.format.read(doc);\n
    },\n
\n
    CLASS_NAME: "OpenLayers.Protocol.CSW.v2_0_2"\n
\n
});\n


]]></string> </value>
        </item>
        <item>
            <key> <string>precondition</string> </key>
            <value> <string></string> </value>
        </item>
        <item>
            <key> <string>size</string> </key>
            <value> <int>4004</int> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string></string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
